import{d as S,y as A,D as l,c as F,G as O,M as U,g,b as n,w as i,l as t,X as W,S as X,_ as Y,P as G,F as H,i as J,$ as x,t as r,H as q,I as K,Y as Q,u as Z,J as ee,o as v}from"./index-DS3UlKvS.js";/* empty css               */import{h as te,a as oe}from"./lists-ByesnzbK.js";/* empty css                  *//* empty css                */import{u as ae}from"./params-BDFm6rUC.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-Bc5PafrH.js";const ne=()=>te({url:"working_condition/",headers:{"Content-Type":"application/json",showLoading:!1},method:"get"}),le={class:"card-wrapper"},re={class:"robot-grid"},ue=["onMouseover"],ie={class:"flex justify-center mt-10"},ce=S({name:"StatisticsAnalysis"}),pe=S({...ce,setup(de){const P=ae(),{savedParams:ge}=A(P),f=ee(),y=Z(),o=l(null),_=l({top:"0px",left:"0px"}),c=l(1),b=l(100),h=l(0),m=l([]),a=l({generateSpeed:0,robotCount:0,totalOrders:0,workingRobots:0,workingRobotsPeak:0,stationCount:0,assignSpeed:0}),R=e=>{c.value=e,p()},D=e=>{b.value=e,p()},z=F(()=>[{key:"任务生成速率",value:a.value.generateSpeed},{key:"任务总数量",value:a.value.totalOrders},{key:"机器人总数量",value:a.value.robotCount},{key:"工作状态机器人数量",value:a.value.workingRobots},{key:"工作状态机器人数量峰值",value:a.value.workingRobotsPeak},{key:"仓储区域数量",value:a.value.stationCount},{key:"任务分配速率",value:a.value.assignSpeed}]),E=e=>{switch(e){case"空闲":return"#67c23a";case"忙碌":return"#e6a23c";case"故障":return"#f56c6c";default:return"#909399"}},p=async()=>{if(y.path==="/statistics")try{const e=await oe(c.value,b.value);m.value=e.results,h.value=e.count}catch{m.value=[],f.proxy.$message({type:"error",message:"获取机器人数据失败"})}},k=async()=>{if(y.path==="/statistics")try{const e=await ne();a.value=e.results,console.log("获取到的工况信息",e.results)}catch{a.value=null,f.proxy.$message({type:"error",message:"获取工况数据失败"})}},I=(e,s)=>{o.value=e,_.value={top:`${s.clientY}px`,left:`${s.clientX}px`}},M=()=>{o.value=null};let d=null;const T=()=>{d=setInterval(async()=>{await p(),await k()},3e3)},$=()=>{d&&(clearInterval(d),d=null)};return O(()=>{p(),k(),T()}),U(()=>{$()}),(e,s)=>{const C=X,j=W,w=Y,B=Q,L=K,N=q;return v(),g("div",le,[n(w,{class:"box-card"},{default:i(()=>[s[1]||(s[1]=t("div",{slot:"header",class:"clearfix"},[t("span",null,"工况数据统计")],-1)),n(j,{data:z.value,style:{width:"100%","margin-top":"40px"},"header-row-style":{height:"100px","font-size":"24px","font-weight":"bold"},"row-style":{height:"80px","font-size":"20px"}},{default:i(()=>[n(C,{prop:"key",label:"数据类型",align:"center",width:"auto"}),n(C,{prop:"value",label:"数值",align:"center"})]),_:1},8,["data"])]),_:1}),n(w,{class:"box-card"},{default:i(()=>[s[2]||(s[2]=t("div",{slot:"header",class:"clearfix"},[t("span",null,"机器人阵列")],-1)),t("div",re,[(v(!0),g(H,null,J(m.value,u=>(v(),g("div",{key:u.robot_id,class:"robot-dot",style:x({backgroundColor:E(u.status)}),onMouseover:V=>I(u,V),onMouseleave:M},null,44,ue))),128))]),o.value?(v(),g("div",{key:0,class:"robot-tooltip",style:x({top:_.value.top,left:_.value.left})},[t("p",null,"机器人ID: "+r(o.value.robot_id),1),t("p",null,"机器人类型: "+r(o.value.robot_type),1),t("p",null,"当前订单: "+r(o.value.order_id),1),t("p",null,"所在站台: "+r(o.value.station_id),1),t("p",null,"状态: "+r(o.value.status),1),t("p",null,"最后刷新: "+r(o.value.last_updated),1)],4)):G("",!0),n(N,null,{default:i(()=>[n(L,{span:16,offset:4},{default:i(()=>[t("div",ie,[n(B,{align:"center",background:"",onCurrentChange:R,onSizeChange:D,"current-page":c.value,"onUpdate:currentPage":s[0]||(s[0]=u=>c.value=u),"page-size":100,"pager-count":15,layout:"total, prev, pager, next, jumper",total:h.value},null,8,["current-page","total"])])]),_:1})]),_:1})]),_:1})])}}}),Ce=se(pe,[["__scopeId","data-v-e46f7cfe"]]);export{Ce as default};
