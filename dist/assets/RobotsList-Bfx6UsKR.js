import{d as y,G as o,K as N,H as S,N as U,O as V,P as j,h as F,b as t,g as l,w as a,T as K,t as r,U as $,f as A,i as w,m as G,e as H,W as M,X as O,Y as W,Z as X,F as Y,u as Z,p as q,o as J}from"./index-B6f5R0QN.js";import{a as Q}from"./lists-aacHL4fF.js";/* empty css                  *//* empty css                */import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-B4_rhbtN.js";const te={style:{"margin-left":"10px"}},ae={class:"flex justify-center mt-4"},ne=y({name:"RobotsList"}),oe=y({...ne,setup(le){const _=N();q();const x=Z(),m=o(null);o(null),o(null),o("All");const g=o([]),u=o(1),p=o(100),f=o(0),b=o(null),v=o(null),C=n=>n.order_id,h=async()=>{if(x.path==="/robots")try{const n=await Q(u.value,p.value);g.value=n.results,f.value=n.count}catch{g.value=[],_.proxy.$message({type:"error",message:"获取机器人数据失败"})}};let i;const R=_.proxy.debounce(()=>{clearInterval(i),i=setInterval(()=>{!v.value&&!b.value&&h()},3e3)},3e3),c=()=>{!v.value&&!b.value&&(clearInterval(i),h().then(()=>{R(1e3)}).catch(()=>{i=setInterval(c,3e3)}))},I=n=>{u.value=n,c()},T=n=>{p.value=n,c()};return S(()=>{c()}),U(()=>{clearInterval(i)}),V(()=>{j(()=>{m.value.doLayout()})}),(n,d)=>{const s=K,k=$,z=H("Timer"),E=G,P=O,D=M,L=W,B=X;return J(),F(Y,null,[t(L,{ref_key:"tableRef",ref:m,data:g.value,"row-key":C,"max-height":"800",style:{width:"90%","margin-top":"100px",margin:"auto"},"scrollbar-always-on":"","header-align":"center",stripe:""},{default:a(()=>[t(s,{type:"index",prop:"index",label:"序号",width:"50",align:"center","header-align":"center"},{default:a(e=>[l("p",null,r(e.$index+1+p.value*(u.value-1)),1)]),_:1}),t(s,{prop:"robot_id",width:"150",label:"机器人ID",align:"center"}),t(s,{prop:"robot_type",width:"150",label:"机器人类型",align:"center"}),t(s,{prop:"order_id",width:"250",label:"当前订单",align:"center"},{default:a(e=>[l("p",null,r(e.row.order_id??"无"),1)]),_:1}),t(s,{prop:"station_id",width:"250",label:"拣选站",align:"center"}),t(s,{prop:"status",width:"150",label:"状态",align:"center"},{default:a(e=>[t(k,{type:A(_).proxy.getTagType(e.row.status,"robot_status")},{default:a(()=>[w(r(e.row.status),1)]),_:2},1032,["type"])]),_:1}),t(s,{prop:"last_updated",label:"最后刷新时间",align:"center"},{default:a(e=>[t(E,null,{default:a(()=>[t(z)]),_:1}),l("span",te,r(e.row.last_updated),1)]),_:1}),t(s,{label:"操作",align:"center",width:"150",fixed:"right"},{default:a(e=>[t(D,{trigger:"hover",placement:"top",width:"240px"},{reference:a(()=>[t(P,{type:"primary",size:"default"},{default:a(()=>d[1]||(d[1]=[w("查看详情")])),_:1})]),default:a(()=>[l("p",null,"机器人ID: "+r(e.row.robot_id),1),l("p",null,"机器人类型: "+r(e.row.robot_type),1),l("p",null,"当前订单: "+r(e.row.order_id),1),l("p",null,"所在站台: "+r(e.row.station_id),1),l("p",null,"状态: "+r(e.row.status),1),l("p",null,"最后刷新: "+r(e.row.last_updated),1)]),_:2},1024)]),_:1})]),_:1},8,["data"]),l("div",ae,[t(B,{align:"center",background:"",onCurrentChange:I,onSizeChange:T,"current-page":u.value,"onUpdate:currentPage":d[0]||(d[0]=e=>u.value=e),"page-size":p.value,"page-sizes":[50,100],"pager-count":15,layout:"total, sizes, prev, pager, next, jumper",total:f.value},null,8,["current-page","page-size","total"])])],64)}}}),de=ee(oe,[["__scopeId","data-v-da24b67b"]]);export{de as default};
