import{d as R,z as A,G as l,c as F,H as O,N as U,h as g,b as n,w as i,g as t,Y as W,T as Y,$ as G,Q as H,F as J,j as K,a0 as x,t as r,I as Q,J as X,Z,u as q,K as ee,o as v}from"./index-B6f5R0QN.js";/* empty css               */import{h as te,a as ae}from"./lists-aacHL4fF.js";/* empty css                  *//* empty css                */import{u as oe}from"./params-OWYE9CYT.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-B4_rhbtN.js";const ne=()=>te({url:"working_condition/",headers:{"Content-Type":"application/json",showLoading:!1},method:"get"}),le={class:"card-wrapper"},re={class:"robot-grid"},ue=["onMouseover"],ie={class:"flex justify-center mt-10"},ce=R({name:"StatisticsAnalysis"}),pe=R({...ce,setup(de){const S=oe(),{savedParams:ge}=A(S),f=ee(),y=q(),a=l(null),_=l({top:"0px",left:"0px"}),c=l(1),b=l(100),h=l(0),m=l([]),o=l({generateSpeed:0,robotCount:0,totalOrders:0,workingRobots:0,workingRobotsPeak:0,stationCount:0,assignSpeed:0}),P=e=>{c.value=e,p()},z=e=>{b.value=e,p()},D=F(()=>[{key:"任务生成速率",value:o.value.generateSpeed},{key:"任务总数量",value:o.value.totalOrders},{key:"机器人总数量",value:o.value.robotCount},{key:"工作状态机器人数量",value:o.value.workingRobots},{key:"工作状态机器人数量峰值",value:o.value.workingRobotsPeak},{key:"仓储区域数量",value:o.value.stationCount},{key:"任务分配速率",value:o.value.assignSpeed}]),E=e=>{switch(e){case"空闲":return"#67c23a";case"忙碌":return"#e6a23c";case"故障":return"#f56c6c";default:return"#909399"}},p=async()=>{if(y.path==="/statistics")try{const e=await ae(c.value,b.value);m.value=e.results,h.value=e.count}catch{m.value=[],f.proxy.$message({type:"error",message:"获取机器人数据失败"})}},k=async()=>{if(y.path==="/statistics")try{const e=await ne();o.value=e.results,console.log("获取到的工况信息",e.results)}catch{o.value=null,f.proxy.$message({type:"error",message:"获取工况数据失败"})}},I=(e,s)=>{a.value=e,_.value={top:`${s.clientY}px`,left:`${s.clientX}px`}},T=()=>{a.value=null};let d=null;const $=()=>{d=setInterval(async()=>{await p(),await k()},3e3)},j=()=>{d&&(clearInterval(d),d=null)};return O(()=>{p(),k(),$()}),U(()=>{j()}),(e,s)=>{const C=Y,M=W,w=G,N=Z,B=X,L=Q;return v(),g("div",le,[n(w,{class:"box-card"},{default:i(()=>[s[1]||(s[1]=t("div",{slot:"header",class:"clearfix"},[t("span",null,"工况数据统计")],-1)),n(M,{data:D.value,style:{width:"100%","margin-top":"40px"},"header-row-style":{height:"100px","font-size":"24px","font-weight":"bold"},"row-style":{height:"80px","font-size":"20px"}},{default:i(()=>[n(C,{prop:"key",label:"数据类型",align:"center",width:"auto"}),n(C,{prop:"value",label:"数值",align:"center"})]),_:1},8,["data"])]),_:1}),n(w,{class:"box-card"},{default:i(()=>[s[2]||(s[2]=t("div",{slot:"header",class:"clearfix"},[t("span",null,"机器人阵列")],-1)),t("div",re,[(v(!0),g(J,null,K(m.value,u=>(v(),g("div",{key:u.robot_id,class:"robot-dot",style:x({backgroundColor:E(u.status)}),onMouseover:V=>I(u,V),onMouseleave:T},null,44,ue))),128))]),a.value?(v(),g("div",{key:0,class:"robot-tooltip",style:x({top:_.value.top,left:_.value.left})},[t("p",null,"机器人ID: "+r(a.value.robot_id),1),t("p",null,"机器人类型: "+r(a.value.robot_type),1),t("p",null,"当前订单: "+r(a.value.order_id),1),t("p",null,"所在站台: "+r(a.value.station_id),1),t("p",null,"状态: "+r(a.value.status),1),t("p",null,"最后刷新: "+r(a.value.last_updated),1)],4)):H("",!0),n(L,null,{default:i(()=>[n(B,{span:16,offset:4},{default:i(()=>[t("div",ie,[n(N,{align:"center",background:"",onCurrentChange:P,onSizeChange:z,"current-page":c.value,"onUpdate:currentPage":s[0]||(s[0]=u=>c.value=u),"page-size":100,"pager-count":15,layout:"total, prev, pager, next, jumper",total:h.value},null,8,["current-page","total"])])]),_:1})]),_:1})]),_:1})])}}}),Ce=se(pe,[["__scopeId","data-v-e46f7cfe"]]);export{Ce as default};
