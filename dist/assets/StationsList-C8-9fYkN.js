import{d as x,G as n,K as B,H as N,N as U,O as F,P as V,h as j,b as t,g as l,w as o,T as K,t as s,U as $,f as A,i as w,m as G,e as H,W as M,X as O,Y as W,Z as X,F as Y,u as Z,p as q,o as J}from"./index-DH73XLWJ.js";import{b as Q}from"./lists-KCPbEXSv.js";/* empty css                  *//* empty css                */import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-DvChFS7E.js";const te={style:{"margin-left":"10px"}},ae={class:"flex justify-center mt-4"},ne=x({name:"StationsList"}),oe=x({...ne,setup(le){const d=B();q();const b=Z(),m=n(null);n(null),n(null),n("All");const _=n([]),u=n(1),g=n(10),f=n(0),v=n(null),h=n(null),C=a=>a.order_id,y=async()=>{if(b.path==="/stations")try{const a=await Q();console.log(111),_.value=a.results,f.value=a.count}catch{_.value=[],d.proxy.$message({type:"error",message:"获取拣选站数据失败"})}};let r;const I=d.proxy.debounce(()=>{clearInterval(r),r=setInterval(()=>{!h.value&&!v.value&&y()},3e3)},3e3),c=()=>{!h.value&&!v.value&&(clearInterval(r),y().then(()=>{I(1e3)}).catch(()=>{r=setInterval(c,3e3)}))},S=a=>{u.value=a,c()},T=a=>{g.value=a,c()};return N(()=>{c()}),U(()=>{clearInterval(r)}),F(()=>{V(()=>{m.value.doLayout()})}),(a,p)=>{const i=K,k=$,z=H("Timer"),E=G,P=O,R=M,D=W,L=X;return J(),j(Y,null,[t(D,{ref_key:"tableRef",ref:m,data:_.value,"row-key":C,"max-height":"800",style:{width:"90%","margin-top":"100px",margin:"auto"},"scrollbar-always-on":"","header-align":"center","row-style":{height:"90px"},stripe:""},{default:o(()=>[t(i,{type:"index",prop:"index",label:"序号",width:"50",align:"center","header-align":"center"},{default:o(e=>[l("p",null,s(e.$index+1+g.value*(u.value-1)),1)]),_:1}),t(i,{prop:"station_id",width:"250",label:"拣选站ID",align:"center"}),t(i,{prop:"status",width:"150",label:"状态",align:"center"},{default:o(e=>[t(k,{type:A(d).proxy.getTagType(e.row.status,"station_status")},{default:o(()=>[w(s(e.row.status),1)]),_:2},1032,["type"])]),_:1}),t(i,{prop:"timestamp",label:"创建时间",align:"center"},{default:o(e=>[t(E,null,{default:o(()=>[t(z)]),_:1}),l("span",te,s(e.row.timestamp),1)]),_:1}),t(i,{label:"操作",align:"center",width:"150",fixed:"right"},{default:o(e=>[t(R,{trigger:"hover",placement:"top",width:"240px"},{reference:o(()=>[t(P,{type:"primary",size:"default"},{default:o(()=>p[1]||(p[1]=[w("查看详情")])),_:1})]),default:o(()=>[l("p",null,"站台ID: "+s(e.row.station_id),1),l("p",null,"状态: "+s(e.row.status),1),l("p",null,"创建时间: "+s(e.row.timestamp),1)]),_:2},1024)]),_:1})]),_:1},8,["data"]),l("div",ae,[t(L,{align:"center",background:"",onCurrentChange:S,onSizeChange:T,"current-page":u.value,"onUpdate:currentPage":p[0]||(p[0]=e=>u.value=e),"page-size":g.value,"page-sizes":[5,10,20],"pager-count":15,layout:"total, sizes, prev, pager, next, jumper",total:f.value},null,8,["current-page","page-size","total"])])],64)}}}),de=ee(oe,[["__scopeId","data-v-e7b01c4d"]]);export{de as default};
